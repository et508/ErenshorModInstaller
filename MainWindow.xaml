<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="ErenshorModInstaller.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Erenshor Mod Installer"
        Height="500" Width="780"
        WindowStartupLocation="CenterScreen"
        AllowDrop="True"
        Drop="Window_Drop"
        DragOver="Window_DragOver">
  <Grid Margin="14">
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="8"/>
      <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="2" Orientation="Horizontal" VerticalAlignment="Center">
      <TextBlock Text="Game Folder:" VerticalAlignment="Center" Width="100"/>
      <TextBox x:Name="GamePathBox" Width="400" Margin="0,0,8,0"/>
      <Button Content="Browse…" Width="80" Margin="0,0,8,0" Click="Browse_Click"/>
      <Button Content="Open Plugins Folder" Width="120" Click="OpenPlugins_Click"/>
    </StackPanel>

    <Border Grid.Row="4" Padding="10" BorderBrush="#DDDDDD" BorderThickness="1" CornerRadius="6">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="8"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Grid.Row="0" VerticalAlignment="Center">
          <Button Content="Validate BepInEx" Width="150" Click="Validate_Click"/>
          <TextBlock x:Name="StatusBlock" Margin="12,0,0,0" VerticalAlignment="Center" TextWrapping="Wrap"/>
        </StackPanel>

        <Grid Grid.Row="2">
          <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="12"/>
            <ColumnDefinition Width="240"/>
          </Grid.ColumnDefinitions>

          <GroupBox Header="Installed Mods (BepInEx/plugins)" Grid.Column="0">
            <DockPanel LastChildFill="True">
              <ListBox x:Name="ModsList" Margin="6" HorizontalContentAlignment="Stretch"/>
            </DockPanel>
          </GroupBox>

          <StackPanel Grid.Column="2">
            <TextBlock Text="Install a Mod" FontWeight="Bold" Margin="0,0,0,6"/>
            <TextBlock Text="Drop a .zip/.7z/.rar or a folder anywhere in this window,"
                       TextWrapping="Wrap"/>
            <TextBlock Text="or click the button below." TextWrapping="Wrap" Margin="0,0,0,10"/>
            <Button Content="Install archive…" Width="90" Margin="0,0,0,8" Click="InstallZip_Click"/>
            <Separator/>
            <TextBlock Text="Manage" FontWeight="Bold" Margin="0,10,0,6"/>
            <Button Content="Refresh List" Width="80" Margin="0,0,0,8" Click="RefreshMods_Click"/>
            <Button Content="Uninstall Selected" Width="100" Click="Uninstall_Click"/>
          </StackPanel>
        </Grid>
      </Grid>
    </Border>
    
    
    <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Left">
      <TextBlock Text="v1.0.0" Margin="0,20,0,0"/>
    </StackPanel>
    <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right">
      <Button Content="Launch Erenshor" Width="120" Margin="0,0,0,0" Click="LaunchErenshor_Click"/>
    </StackPanel>
  </Grid>
</Window>
